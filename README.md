# Vibe Route - è½¨è¿¹ç®¡ç†ç³»ç»Ÿ

> æœ¬é¡¹ç›®è¿˜åœ¨è¿›è¡Œä¸­ã€‚ä½¿ç”¨ Claude Code + GLM Coding Plan ç”Ÿæˆã€‚  
> ğŸš€ é€Ÿæ¥æ‹¼å¥½æ¨¡ï¼Œæ™ºè°± GLM Coding è¶…å€¼è®¢é˜…ï¼Œé‚€ä½ ä¸€èµ·è–…ç¾Šæ¯›ï¼Claude Codeã€Cline ç­‰ 20+ å¤§ç¼–ç¨‹å·¥å…·æ— ç¼æ”¯æŒï¼Œâ€œç åŠ›â€å…¨å¼€ï¼Œè¶Šæ‹¼è¶Šçˆ½ï¼ç«‹å³å¼€æ‹¼ï¼Œäº«é™æ—¶æƒŠå–œä»·ï¼é“¾æ¥ï¼šhttps://www.bigmodel.cn/glm-coding?ic=AGNTPPSX90

åŸºäº [gpxutil](https://github.com/DingJunyao/gpxutil) æ„å»ºçš„å…¨æ ˆ Web è½¨è¿¹ç®¡ç†ç³»ç»Ÿã€‚

æ¯ä¸€æ¬¡æ—…ç¨‹éƒ½æ˜¯ç”Ÿå‘½ä¸­ç‹¬ä¸€æ— äºŒçš„å™äº‹ã€‚ä»å±±å³¦å å¶‚åˆ°åŸå¸‚è¡—å··ï¼Œä»æ™¨å…‰ç†¹å¾®åˆ°æš®è‰²å››åˆï¼Œè¶³è¿¹åœ¨æ—¶ç©ºä¹‹ä¸­äº¤ç»‡å‡ºå±äºè‡ªå·±çš„è½¨è¿¹ã€‚è¿™äº›è½¨è¿¹ä¸ä»…è®°å½•äº†èµ°è¿‡çš„è·ç¦»ï¼Œæ›´æ‰¿è½½ç€æ²¿é€”çš„é£æ™¯ã€å¿ƒå¢ƒä¸å›å¿†ã€‚

Vibe Route æ—¨åœ¨å°†è¿™äº›æ•°å­—åŒ–çš„è¶³è¿¹è½¬åŒ–ä¸ºå¯è¢«æ„ŸçŸ¥ã€è¢«åˆ†äº«ã€è¢«çè—çš„è®°å¿†ã€‚ç³»ç»Ÿå°†åœ°ç†åæ ‡ã€æµ·æ‹”å˜åŒ–ã€é€Ÿåº¦èŠ‚å¥ç­‰å¤šç»´æ•°æ®èåˆï¼Œè®©å¹³é¢çš„çº¿æ¡åœ¨åœ°å›¾ä¸Šé‡æ–°å‘¼å¸ã€‚

æ— è®ºæ˜¯ç‹¬è‡ªæ¢ç´¢çš„è¿œè¶³ï¼Œæ¯ä¸€æ¬¡å‘¼å¸éƒ½ä¸å±±æ—åŒé¢‘ï¼›æˆ–æ˜¯ä¸æœ‹å‹å…±äº«çš„éª‘è¡Œï¼Œè½¦è½®è½¬åŠ¨é—´ä¼ é€’ç€æ¬¢ç¬‘ä¸é»˜å¥‘ï¼›äº¦æˆ–æ˜¯è‡ªé©¾è¿½å¯»è¿œæ–¹ï¼Œå¼•æ“çš„è½°é¸£ä¼´éšå¤•é˜³çš„ä½™æ™–â€”â€”æ¯ä¸€æ¡è½¨è¿¹éƒ½æˆä¸ºä¸ªäººè¡Œèµ°çš„è¯—ç¯‡ã€‚

æŠ€æœ¯æ¶æ„çš„ç²¾å¿ƒè®¾è®¡æ”¯æ’‘ç€è¿™ä¸€æ„¿æ™¯ã€‚åŒå±‚åŠ å¯†ç¡®ä¿æ•°æ®å®‰å…¨ï¼Œå¤šåæ ‡ç³»çš„è‡ªç”±é€‚åº”è®©åœ°ç†è¡¨è¾¾æ›´åŠ ç²¾å‡†ï¼Œè€Œ Web ç«¯çš„å¯è§†åŒ–ä¸ç”ŸæˆåŠŸèƒ½åˆ™èµ‹äºˆäº†åˆ›ä½œè€…ä¸°å¯Œçš„è¡¨è¾¾ç©ºé—´ã€‚ä»åŸå§‹çš„ GPX æ–‡ä»¶åˆ°ç²¾ç¾çš„è¦†ç›–å±‚ï¼Œä»å•ä¸€çš„æ•°æ®ç‚¹åˆ°å®Œæ•´çš„å™äº‹å¼§çº¿ï¼Œç³»ç»Ÿå§‹ç»ˆè‡´åŠ›äºä¸ºåˆ›ä½œè€…æä¾›æœ€æµç•…çš„ä½“éªŒã€‚

è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªè½¨è¿¹ç®¡ç†ç³»ç»Ÿï¼Œæ›´æ˜¯ä¸€ä¸ªä¸ªäººå†å²æ¡£æ¡ˆé¦†ï¼Œä¸€ä¸ªè¡Œèµ°è®°å¿†çš„æ•°å­—åŒ–ç”»å¸ƒã€‚

## é¡¹ç›®æˆªå›¾

### PC Web ç«¯

![ä¸»é¡µ](./doc/img/desktop_main.png)

![è½¨è¿¹åˆ—è¡¨](./doc/img/desktop_list.png)

![è½¨è¿¹è¯¦æƒ…](./doc/img/desktop_detail.png)

### ç§»åŠ¨ Web ç«¯

![ä¸»é¡µ](./doc/img/mobile_main.png) ![è½¨è¿¹åˆ—è¡¨](./doc/img/mobile_list.png)

![è½¨è¿¹è¯¦æƒ… - 1](./doc/img/mobile_detail_1.png) ![è½¨è¿¹è¯¦æƒ… - 2](./doc/img/mobile_detail_2.png)

## é¡¹ç›®è¿›åº¦

### å·²å®Œæˆ âœ…

#### æ ¸å¿ƒåŠŸèƒ½

- [x] é¡¹ç›®åŸºç¡€æ¶æ„æ­å»º
- [x] æ•°æ®åº“æ¨¡å‹è®¾è®¡ï¼ˆæ”¯æŒ SQLite/MySQL/PostgreSQL + PostGISï¼‰
- [x] JWT è®¤è¯ç³»ç»Ÿï¼ˆåŒé‡åŠ å¯†ï¼šå‰ç«¯ SHA256 + åç«¯ bcryptï¼‰
- [x] ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- [x] é¦–ä½ç”¨æˆ·è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜
- [x] é‚€è¯·ç ç³»ç»Ÿ

#### è½¨è¿¹ç®¡ç†

- [x] è½¨è¿¹ä¸Šä¼ ï¼ˆæ”¯æŒ GPX/CSV/XLSX/KML/KMZ æ ¼å¼ï¼‰
- [x] è½¨è¿¹åˆ—è¡¨ï¼ˆåˆ†é¡µã€æœç´¢ã€æ’åºï¼‰
- [x] è½¨è¿¹è¯¦æƒ…æŸ¥çœ‹
- [x] è½¨è¿¹ç¼–è¾‘ï¼ˆåç§°ã€æè¿°ã€åæ ‡ç³»ï¼‰
- [x] è½¨è¿¹å¯¼å‡ºï¼ˆGPX/CSV/XLSX/KMLï¼‰
- [x] è½¨è¿¹åˆ é™¤
- [x] å¤šåæ ‡ç³»æ”¯æŒï¼ˆWGS84/GCJ02/BD09ï¼‰
- [x] åæ ‡ç³»è½¬æ¢
- [x] åœ°ç†ç¼–ç å¡«å……
- [x] å¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼ˆå¤§æ–‡ä»¶å¤„ç†ï¼‰

#### åœ°å›¾å¯è§†åŒ–

- [x] å¤šåœ°å›¾å¼•æ“æ”¯æŒï¼ˆé«˜å¾·åœ°å›¾ / ç™¾åº¦åœ°å›¾ / è…¾è®¯åœ°å›¾ / Leafletï¼ˆåŒ…æ‹¬ä½†ä¸é™äºå¤©åœ°å›¾ / OpenStreetMapï¼‰ï¼‰
- [x] è½¨è¿¹è·¯å¾„ç»˜åˆ¶
- [x] åœ°å›¾ä¸å›¾è¡¨åŒå‘åŒæ­¥
- [x] ç»è¿‡åŒºåŸŸç‚¹å‡»é«˜äº®
- [x] å“åº”å¼åœ°å›¾è®¾è®¡
- [x] åœ°å›¾å±…ä¸­æŒ‰é’®
- [x] è½¨è¿¹åˆ†äº«é¡µã€HTML å…ƒç´ åµŒå…¥

#### ç»Ÿè®¡å›¾è¡¨

- [x] æµ·æ‹”å‰–é¢å›¾
- [x] é€Ÿåº¦æ›²çº¿å›¾
- [x] è½¨è¿¹ç‚¹ç»Ÿè®¡ä¿¡æ¯

#### å®æ—¶è®°å½•

- [x] å®æ—¶è½¨è¿¹è®°å½•ä¼šè¯ç®¡ç†
- [x] GPS Logger é›†æˆ
- [x] WebSocket å®æ—¶æ¨é€
- [x] å®æ—¶ä¸Šä¼ çŠ¶æ€æ˜¾ç¤º
- [x] è‡ªåŠ¨é‡è¿æœºåˆ¶

#### åå°ç®¡ç†

- [x] ç”¨æˆ·ç®¡ç†ï¼ˆåˆ—è¡¨ã€æœç´¢ã€ç­›é€‰ï¼‰
- [x] ç”¨æˆ·æƒé™ç®¡ç†ï¼ˆç®¡ç†å‘˜è®¾ç½®ã€ç¦ç”¨/å¯ç”¨ï¼‰
- [x] å¯†ç é‡ç½®
- [x] ç³»ç»Ÿé…ç½®ï¼ˆæ³¨å†Œå¼€å…³ã€åœ°å›¾é…ç½®ï¼‰
- [x] é‚€è¯·ç ç®¡ç†
- [x] é“è·¯æ ‡å¿—å­—ä½“ç®¡ç†

#### ç‰¹è‰²åŠŸèƒ½
- [x] é“è·¯æ ‡å¿—ç”Ÿæˆï¼ˆæ™®é€šé“è·¯/é«˜é€Ÿå…¬è·¯ï¼‰
- [x] è½¨è¿¹è¦†ç›–å±‚ç”Ÿæˆï¼ˆä¿¡æ¯å åŠ å›¾ï¼‰
- [x] ç»è¿‡åŒºåŸŸæ ‘å½¢å±•ç¤ºï¼ˆçœ/å¸‚/åŒº/é“è·¯ï¼‰
- [x] è¿œç¨‹æ—¥å¿—è°ƒè¯•
- [x] å“åº”å¼è®¾è®¡ï¼ˆPC + ç§»åŠ¨ç«¯é€‚é…ï¼‰

### å®ç°ä¸­ï¼ˆå®ç°äº†åŸºæœ¬åŠŸèƒ½ï¼‰

- [ ] è·¯å¾„æ’å€¼ï¼šç”¨äºéš§é“ç­‰æ— ä¿¡å·çš„åœ°æ–¹
- [ ] è½¨è¿¹æµ·æŠ¥ / æˆªå›¾ç”Ÿæˆ
- [ ] åœ¨çº¿ç¼–è¾‘åœ°ç†ä¿¡æ¯

### å¾…å®ç° ğŸš§

- [ ] è½¨è¿¹åŠ¨ç”»
- [ ] è¦†ç›–å±‚ç”Ÿæˆä¸é…ç½®
- [ ] â€¦â€¦

## åŠŸèƒ½ç‰¹æ€§

### ç”¨æˆ·è®¤è¯ä¸ç®¡ç†

- **åŒé‡åŠ å¯†å®‰å…¨**ï¼šå¯†ç åœ¨å‰ç«¯ä½¿ç”¨ SHA256 åŠ å¯†ï¼Œåç«¯ä½¿ç”¨ bcrypt äºŒæ¬¡å“ˆå¸Œå­˜å‚¨
- **è‡ªåŠ¨ç®¡ç†å‘˜**ï¼šç³»ç»Ÿé¦–ä½æ³¨å†Œç”¨æˆ·è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜
- **é‚€è¯·ç æœºåˆ¶**ï¼šå¯é€‰çš„é‚€è¯·ç éªŒè¯ç³»ç»Ÿï¼Œç®¡ç†å‘˜å¯åˆ›å»ºå’Œç®¡ç†é‚€è¯·ç 
- **ç”¨æˆ·ä¿æŠ¤**ï¼šä¸èƒ½æ“ä½œè‡ªå·±ï¼ˆä¿®æ”¹ç®¡ç†å‘˜çŠ¶æ€ã€ç¦ç”¨ã€åˆ é™¤ï¼‰ï¼Œä¿æŠ¤é¦–ä½ç”¨æˆ·

### è½¨è¿¹ç®¡ç†

- **å¤šæ ¼å¼ä¸Šä¼ **ï¼šæ”¯æŒ GPXã€CSVã€XLSXã€KMLã€KMZ æ ¼å¼
- **GPS Logger å…¼å®¹**ï¼šæ”¯æŒ GPS Logger CSV æ ¼å¼
- **å¤šåæ ‡ç³»æ”¯æŒ**ï¼šåŒæ—¶å­˜å‚¨ WGS84/GCJ02/BD09 ä¸‰ç§åæ ‡ç³»
- **åæ ‡è½¬æ¢**ï¼šæ”¯æŒåæ ‡ç³»ä¹‹é—´çš„äº’è½¬
- **åœ°ç†ç¼–ç **ï¼šè‡ªåŠ¨å¡«å……è¡Œæ”¿åŒºåˆ’å’Œé“è·¯ä¿¡æ¯
- **è½¨è¿¹ç¼–è¾‘**ï¼šä¿®æ”¹åç§°ã€æè¿°ã€åŸå§‹åæ ‡ç³»
- **å¤šæ ¼å¼å¯¼å‡º**ï¼š
  - GPXï¼šæ ‡å‡†æ ¼å¼ï¼Œæ”¯æŒé€‰æ‹©åæ ‡ç³»
  - CSVï¼šUTF-8 ç¼–ç å¸¦ BOMï¼Œç¡®ä¿ Excel æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡
  - XLSXï¼šæœ¬é¡¹ç›®å¯¼å‡ºæ ¼å¼
  - KMLï¼šGoogle gx:Track æ‰©å±•ï¼Œæ”¯æŒä¸¤æ­¥è·¯å¯¼å…¥

### åœ°å›¾å¯è§†åŒ–

- **å¤šåœ°å›¾å¼•æ“**ï¼šæ”¯æŒé«˜å¾·åœ°å›¾ã€ç™¾åº¦åœ°å›¾ã€è…¾è®¯åœ°å›¾ã€Leaflet
- **è‡ªåŠ¨åæ ‡é€‚é…**ï¼šæ ¹æ®åº•å›¾è‡ªåŠ¨ä½¿ç”¨å¯¹åº”åæ ‡ç³»
- **è½¨è¿¹è·¯å¾„ç»˜åˆ¶**ï¼šåœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºè½¨è¿¹è·¯å¾„
- **äº¤äº’åŠŸèƒ½**ï¼š
  - æ‚¬åœæ˜¾ç¤ºè½¨è¿¹ä¿¡æ¯ï¼ˆé¦–é¡µï¼‰
  - ç‚¹å‡»æ˜¾ç¤ºç‚¹ä¿¡æ¯ï¼ˆè¯¦æƒ…é¡µï¼‰
  - åœ°å›¾ä¸å›¾è¡¨åŒå‘åŒæ­¥
- **ç»è¿‡åŒºåŸŸ**ï¼šæŒ‰è¡Œæ”¿å±‚çº§ï¼ˆçœâ†’å¸‚â†’åŒºâ†’é“è·¯ï¼‰æ ‘å½¢å±•ç¤º
- **åŒºåŸŸé«˜äº®**ï¼šç‚¹å‡»æ ‘èŠ‚ç‚¹é«˜äº®å¯¹åº”è½¨è¿¹æ®µ
- **å“åº”å¼è®¾è®¡**ï¼šè‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸

### å®æ—¶è®°å½•

- **ä¼šè¯ç®¡ç†**ï¼šåˆ›å»ºã€ç»“æŸã€åˆ é™¤å®æ—¶è®°å½•ä¼šè¯
- **Token è®¤è¯**ï¼šç”Ÿæˆé•¿æœŸæœ‰æ•ˆçš„ä¸Šä¼  tokenï¼Œæ— éœ€ç™»å½•å³å¯ä¸Šä¼ 
- **GPS Logger é›†æˆ**ï¼šå…¼å®¹ GPS Logger ç­‰åº”ç”¨çš„ä¸Šä¼ æ ¼å¼
- **å•ç‚¹ä¸Šä¼ **ï¼šæ”¯æŒ GET/POST ä¸Šä¼ å•ä¸ªè½¨è¿¹ç‚¹
- **æ‰¹é‡ä¸Šä¼ **ï¼šæ”¯æŒ GPX æ–‡ä»¶æ‰¹é‡ä¸Šä¼ 
- **WebSocket å®æ—¶æ¨é€**ï¼š
  - `connected`ï¼šè¿æ¥æˆåŠŸ
  - `point_added`ï¼šæ–°ç‚¹æ·»åŠ 
  - `stats_updated`ï¼šç»Ÿè®¡æ›´æ–°
- **è‡ªåŠ¨é‡è¿**ï¼šè¿æ¥æ–­å¼€å 3 ç§’è‡ªåŠ¨é‡è¿
- **å®æ—¶çŠ¶æ€æ˜¾ç¤º**ï¼šè½¨è¿¹åˆ—è¡¨å’Œè¯¦æƒ…é¡µç›´æ¥æ˜¾ç¤ºä¸Šä¼ çŠ¶æ€

### åå°ç®¡ç†

- **ç”¨æˆ·ç®¡ç†**ï¼šåˆ†é¡µåˆ—è¡¨ã€æœç´¢ã€æ’åºã€ç­›é€‰
- **æƒé™ç®¡ç†**ï¼š
  - è®¾ç½®/å–æ¶ˆç®¡ç†å‘˜
  - å¯ç”¨/ç¦ç”¨ç”¨æˆ·
  - é‡ç½®ç”¨æˆ·å¯†ç 
  - åˆ é™¤ç”¨æˆ·ï¼ˆè½¯åˆ é™¤ï¼‰
- **ç³»ç»Ÿé…ç½®**ï¼š
  - æ³¨å†Œå¼€å…³
  - é‚€è¯·ç è¦æ±‚
  - åœ°å›¾æä¾›å•†
  - åœ°å›¾å±‚é…ç½®
  - é“è·¯æ ‡å¿—å­—ä½“è®¾ç½®
- **é‚€è¯·ç ç®¡ç†**ï¼šåˆ›å»ºã€æŸ¥çœ‹åˆ—è¡¨ã€åˆ é™¤

### ç‰¹è‰²åŠŸèƒ½

- **é“è·¯æ ‡å¿—ç”Ÿæˆ**ï¼š
  - æ™®é€šé“è·¯ï¼šG/S/X + ä¸‰ä½æ•°å­—
  - å›½å®¶é«˜é€Ÿï¼šG + 1-4 ä½æ•°å­—
  - çœçº§é«˜é€Ÿï¼šS + çº¯æ•°å­—æˆ– S + å­—æ¯ + å¯é€‰æ•°å­—ï¼ˆä»…é™å››å·çœï¼‰
  - é«˜è´¨é‡ SVG çŸ¢é‡è¾“å‡º

- **è½¨è¿¹è¦†ç›–å±‚ç”Ÿæˆ**ï¼š
  - ç”Ÿæˆå¸¦æœ‰è½¨è¿¹ä¿¡æ¯çš„ PNG å›¾ç‰‡åºåˆ—
  - è‡ªå®šä¹‰å›¾ç‰‡å°ºå¯¸ã€å­—ä½“å¤§å°
  - æ”¯æŒæ˜¾ç¤ºåæ ‡ã€æµ·æ‹”ã€é“è·¯ä¿¡æ¯
  - å¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼Œå®Œæˆåä¸‹è½½ ZIP åŒ…

- **è¿œç¨‹æ—¥å¿—è°ƒè¯•**ï¼š
  - å‰ç«¯æ—¥å¿—å®æ—¶æ¨é€
  - è‡ªåŠ¨è§£ææ—¥å¿—æ ‡ç­¾ï¼ˆå¦‚ [AMap]ï¼‰
  - ç§»åŠ¨ç«¯é€šè¿‡ URL å‚æ•° `?remote-log` å¯ç”¨
  - ç”µè„‘ç«¯è®¿é—® `/log-viewer` æŸ¥çœ‹å®æ—¶æ—¥å¿—

- **å“åº”å¼è®¾è®¡**ï¼š
  - ç§»åŠ¨ç«¯æ–­ç‚¹ï¼š1366px
  - å¡ç‰‡åˆ—è¡¨æ›¿ä»£è¡¨æ ¼
  - è§¦æ‘¸å‹å¥½çš„äº¤äº’
  - åœ°å›¾è‡ªåŠ¨é‡ç»˜

## æŠ€æœ¯æ ˆ

### åç«¯

- **FastAPI** + Python 3.11+ - ç°ä»£ Web æ¡†æ¶
- **SQLAlchemy** + Alembic - ORM å’Œæ•°æ®åº“è¿ç§»
- **JWT** - ç”¨æˆ·è®¤è¯
- **WebSocket** - å®æ—¶é€šä¿¡
- **gpxutil** - è½¨è¿¹å¤„ç†æ ¸å¿ƒï¼ˆå‚è€ƒï¼‰

**æ•°æ®åº“æ”¯æŒ**ï¼š

| é©±åŠ¨ | ç”¨é€” | x86/x64 | ARM (æ ‘è“æ´¾) |
|------|------|---------|--------------|
| `aiosqlite` | SQLite å¼‚æ­¥ | âœ… wheel | âœ… wheel |
| `asyncmy` | MySQL å¼‚æ­¥ï¼ˆé«˜æ€§èƒ½ï¼‰ | âœ… wheel | âŒ éœ€ Rust ç¼–è¯‘ |
| `aiomysql` | MySQL å¼‚æ­¥ï¼ˆçº¯ Pythonï¼‰ | âœ… | âœ… wheel |
| `asyncpg` | PostgreSQL å¼‚æ­¥ | âœ… wheel | âŒ éœ€ç¼–è¯‘ |
| `pymysql` | Alembic è¿ç§»ï¼ˆMySQLï¼‰ | âœ… | âœ… wheel |
| `psycopg2-binary` | Alembic è¿ç§»ï¼ˆPostgreSQLï¼‰ | âœ… wheel | âŒ éœ€ç¼–è¯‘ |

**æ”¯æŒçš„æ•°æ®åº“**ï¼š

- SQLiteï¼ˆé»˜è®¤ï¼‰
- MySQL
- PostgreSQL + PostGISï¼ˆç©ºé—´æ‰©å±•ï¼‰

### å‰ç«¯

- **Vue 3** + TypeScript + Vite - æ¸è¿›å¼æ¡†æ¶
- **Element Plus** - UI ç»„ä»¶åº“
- **Pinia** - çŠ¶æ€ç®¡ç†
- **Vue Router** - è·¯ç”±ç®¡ç†
- **Axios** - HTTP å®¢æˆ·ç«¯
- **ECharts** - æ•°æ®å¯è§†åŒ–

**åœ°å›¾å¼•æ“**ï¼š

- é«˜å¾·åœ°å›¾ (AMap GL)
- ç™¾åº¦åœ°å›¾ (BMapGL)
- è…¾è®¯åœ°å›¾ (TMap GL)
- Leaflet + OpenStreetMap

## å¿«é€Ÿå¼€å§‹

### åç«¯å¯åŠ¨

**ARM æ¶æ„ï¼ˆæ ‘è“æ´¾ã€Termux + proot-distro ç­‰ï¼‰**ï¼š

> **é‡è¦æç¤º**ï¼š
> 1. **bcrypt ç‰ˆæœ¬**ï¼šéœ€å›ºå®šåœ¨ 3.xï¼ˆ`bcrypt>=3.2.0,<4.0.0`ï¼‰ï¼Œä¸ passlib 1.7.4 å…¼å®¹
> 2. **svgpathtools æ¥æº**ï¼šéœ€ä» GitHub ç‰¹å®šä»“åº“å®‰è£…
> 3. **piwheels é—®é¢˜**ï¼šæŸäº›åŒ…å­˜åœ¨å…ƒæ•°æ®æŸåï¼Œå»ºè®®ç›´æ¥ä» PyPI å®‰è£…

```bash
cd backend

# 1. å®‰è£… Rust å·¥å…·é“¾ï¼ˆç¼–è¯‘ bcryptã€asyncmy ç­‰ï¼‰
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env

# 2. å®‰è£…ç³»ç»Ÿç¼–è¯‘ä¾èµ–
sudo apt-get install -y build-essential libffi-dev python3-dev libpq-dev python3.13-venv

# 3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# 4. ä» PyPI å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆé¿å… piwheels å…ƒæ•°æ®é—®é¢˜ï¼‰
pip install fastapi uvicorn[standard] sqlalchemy alembic aiosqlite asyncmy aiomysql asyncpg pymysql psycopg2-binary bcrypt>=3.2.0,<4.0.0 python-jose[cryptography] passlib[bcrypt] python-dotenv celery redis pydantic pydantic-settings email-validator httpx aiofiles requests gpxpy lxml pandas geopandas shapely svgwrite fonttools pillow cairosvg imageio numpy tqdm pyyaml pypinyin loguru openpyxl pytest pytest-asyncio rarfile slowapi python-multipart --index-url https://pypi.org/simple

# 5. svgpathtools ä» GitHub å®‰è£…ï¼ˆPyPI ç‰ˆæœ¬ä¸å…¼å®¹ï¼‰
pip install "svgpathtools @ https://github.com/bcwhite-code/svgpathtools/archive/refs/heads/master.zip"

# 6. å®‰è£… Playwright
pip install playwright==1.58.0
playwright install chromium

# 7. å®‰è£… Playwright ç³»ç»Ÿä¾èµ–
sudo apt-get install -y libnspr4 libnss3 libatk1.0-0t64 libatk-bridge2.0-0t64 libcups2t64 libxcb1 libxkbcommon0 libatspi2.0-0t64 libx11-6 libxcomposite1 libxdamage1 libxext6 libxfixes3 libxrandr2 libgbm1 libcairo2 libpango-1.0-0 libasound2t64

# 8. å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.example .env

# 9. åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data/uploads data/temp data/exports data/road_signs

# 10. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆä½¿ç”¨ SQLAlchemy åˆ›å»ºè¡¨ï¼‰
python -c "
import asyncio
from app.core.database import engine
from app.models import Base

async def init_db():
    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)

asyncio.run(init_db())
print('æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ!')
"

# 11. è®¾ç½® alembic ç‰ˆæœ¬æ ‡è®°
python -c "
import sqlite3
conn = sqlite3.connect('data/vibe_route.db')
cursor = conn.cursor()
cursor.execute('CREATE TABLE IF NOT EXISTS alembic_version (version_num VARCHAR(32) NOT NULL)')
cursor.execute('INSERT INTO alembic_version (version_num) VALUES (' + "'"'014_add_interpolations' + "'" + '))
conn.commit()
print('Alembic ç‰ˆæœ¬å·²è®¾ç½®: 014_add_interpolations')
"

# 12. è¿è¡Œå¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload
```

> **Termux + proot-distro ç”¨æˆ·**ï¼šè¯·å‚è€ƒ [doc/termux-deployment.md](./doc/termux-deployment.md) è·å–è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—å’Œå¸¸è§é—®é¢˜è§£å†³ã€‚

**x86/x64 æ¶æ„**ï¼š

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.example .env

# åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data/uploads data/temp data/exports data/road_signs

# æ•°æ®åº“è¿ç§»ï¼ˆé¦–æ¬¡å¯åŠ¨æˆ–æ¨¡å‹å˜æ›´æ—¶ï¼‰
alembic upgrade head

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload
```

åç«¯å°†è¿è¡Œåœ¨ `http://localhost:8000`

API æ–‡æ¡£ï¼š`http://localhost:8000/docs`

### å‰ç«¯å¯åŠ¨

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨ `http://localhost:5173`

## å†…ç½‘ç©¿é€é…ç½®

å½“ä½ éœ€è¦é€šè¿‡å†…ç½‘ç©¿é€ï¼ˆå¦‚ frpã€ngrokï¼‰è®¿é—®å‰ç«¯æœåŠ¡æ—¶ï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ä»¥è§£å†³ WebSocket è¿æ¥é—®é¢˜ã€‚

### é…ç½®æ­¥éª¤

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š

   ```bash
   cd frontend
   cp .env.example .env.local
   ```

2. ç¼–è¾‘ `.env.local`ï¼Œå¡«å…¥ä½ çš„åŸŸåï¼š

   ```env
   # å®Œæ•´çš„è®¿é—®åœ°å€ï¼ˆåè®® + åŸŸåï¼‰
   VITE_ORIGIN=https://your-domain.com

   # ç¦ç”¨ HMRï¼ˆå†…ç½‘ç©¿é€ç¯å¢ƒä¸‹ WebSocket è¿æ¥ä¸ç¨³å®šï¼Œå»ºè®®ç¦ç”¨ï¼‰
   VITE_DISABLE_HMR=true

   # å…è®¸çš„ä¸»æœºåˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰
   VITE_ALLOWED_HOSTS=your-domain.com,.your-domain.com
   ```

3. é‡å¯å¼€å‘æœåŠ¡å™¨ä½¿é…ç½®ç”Ÿæ•ˆã€‚

### é…ç½®è¯´æ˜

| å˜é‡ | è¯´æ˜ |
| --- | --- |
| `VITE_ORIGIN` | è®¾ç½®æœåŠ¡å™¨çš„åŸå§‹è®¿é—®åœ°å€ï¼ŒVite ä¼šç”¨å®ƒæ¥ç”Ÿæˆèµ„æºé“¾æ¥ |
| `VITE_DISABLE_HMR` | ç¦ç”¨çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰ï¼Œå†…ç½‘ç©¿é€å¯¹ WebSocket æ”¯æŒæœ‰é™ï¼Œç¦ç”¨åéœ€æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨ |
| `VITE_ALLOWED_HOSTS` | å…è®¸è®¿é—®çš„ä¸»æœºåˆ—è¡¨ï¼Œé˜²æ­¢ Host æ”»å‡» |

### æ³¨æ„äº‹é¡¹

- `.env.local` æ–‡ä»¶ä¸ä¼šè¢« Git è·Ÿè¸ªï¼ˆå·²åœ¨ `.gitignore` ä¸­ï¼‰ï¼Œä¸ä¼šæ³„éœ²åŸŸåä¿¡æ¯
- ç¦ç”¨ HMR åï¼Œä»£ç ä¿®æ”¹éœ€è¦**æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨**æ‰èƒ½çœ‹åˆ°å˜åŒ–
- å¦‚æœç¡®å®éœ€è¦å¯ç”¨ HMRï¼Œè¯·ç¡®ä¿å†…ç½‘ç©¿é€æœåŠ¡æ”¯æŒ WebSocketï¼Œå¹¶å°† `VITE_DISABLE_HMR` è®¾ä¸º `false`ï¼ŒåŒæ—¶é…ç½® `VITE_HMR_HOST`ã€`VITE_HMR_PORT`ã€`VITE_HMR_PROTOCOL`

## æ•°æ®åº“é…ç½®

é¡¹ç›®é»˜è®¤ä½¿ç”¨ SQLiteï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

### åˆ‡æ¢åˆ° MySQL

åœ¨ `backend/.env` ä¸­é…ç½®ï¼š

```env
DATABASE_TYPE=mysql
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=vibe_route
MYSQL_PASSWORD=your-password
MYSQL_DB=vibe_route
```

### åˆ‡æ¢åˆ° PostgreSQL

åœ¨ `backend/.env` ä¸­é…ç½®ï¼š

```env
DATABASE_TYPE=postgresql
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=vibe_route
POSTGRES_PASSWORD=your-password
POSTGRES_DB=vibe_route
```

## é¡¹ç›®ç»“æ„

```
vibe_route/
â”œâ”€â”€ backend/                 # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/        # Pydantic schemas
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ gpxutil_wrapper/  # gpxutil é›†æˆ
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/               # Vue 3 å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/           # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ components/    # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ stores/        # Pinia stores
â”‚   â”‚   â”œâ”€â”€ router/        # è·¯ç”±
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â””â”€â”€ docker-compose.yml
```

## è®¸å¯è¯

MIT
